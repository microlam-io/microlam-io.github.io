<!DOCTYPE html>
<html>





<head>
  <title>Microlam - Creating Your First Application - main</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Microlam: AWS Serverless with Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Microlam_io"> 
  <meta name="twitter:creator" content="@Microlam_io">
  <meta property="og:url" content="https://microlam.io/version/main/guides/getting-started" />
  <meta property="og:title" content="Creating Your First Application - main" />
  <meta property="og:description" content="Microlam: AWS Serverless with Java" />
  
  <link rel="canonical" href="https://microlam.io/guides/getting-started">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Microlam">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/microlam_logo_horizontal_rgb_439_reverse.png" class="project-logo" title="Microlam"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">About <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS MICROLAM?</a></li>
          <li><a href="/aws-serverless-first" class="">AWS SERVERLESS FIRST</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">GUIDES</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Community <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          </ul>
      </li>
      <li>
        <a href="/get-started" class="button-cta secondary white">Get Started</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/version/main/guides/"> Back to Guides</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">Select Guide Version</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
          
        <option value="main" selected>Main - SNAPSHOT</option>
        
        
      
        
        
        
        
          
        <option value="latest" >0.4.0 - Latest</option>
        
        
      
        
        
        
        
          
        <option value="0.3.3" >0.3.3</option>
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">Creating Your First Application </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">1. Prerequisites</a></li>
<li><a href="#architecture">2. Architecture</a></li>
<li><a href="#bootstrapping-the-project">3. Bootstrapping the project</a></li>
<li><a href="#discovering-and-working-with-the-generated-project">4. Discovering and working with the generated project</a>
<ul class="sectlevel2">
<li><a href="#the-java-code-in-srcmainjava">4.1. The Java code in src/main/java</a></li>
<li><a href="#the-pom-xml">4.2. The pom.xml</a></li>
<li><a href="#the-native-configuration">4.3. The Native configuration</a></li>
<li><a href="#the-java-code-in-srctestjava">4.4. The Java code in src/test/java</a></li>
</ul>
</li>
<li><a href="#logging">5. Logging</a></li>
<li><a href="#microlam">6. Microlam</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Learn how to create a Hello World Microlam app.
This guide covers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bootstrapping an application</p>
</li>
<li>
<p>Testing the application</p>
</li>
<li>
<p>Packaging of the application</p>
</li>
<li>
<p>Deploying to AWS</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>1. Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>from 15 minutes to 1 hour</p>
</li>
<li>
<p>an IDE</p>
</li>
<li>
<p>JDK 11+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.6.2+</p>
</li>
<li>
<p><a href="https://docs.docker.com/get-docker/">Docker</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">AWS CLI</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/cdk/v2/guide/getting_started.html">AWS CDK CLI</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Verify Maven is using the Java you expect</div>
<div class="paragraph">
<p>If you have multiple JDK&#8217;s installed it is not certain Maven will pick up the expected java
and you could end up with unexpected results.
You can verify which JDK Maven uses by running <code>mvn --version</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>2. Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, we create a straightforward application serving 2 endpoints <code>mult</code> and <code>sum</code> with a REST API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>POST /mult</code></p>
</li>
<li>
<p><code>POST /sum</code></p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/quickstart-architecture.drawio.png" alt="Architecture">
</div>
</div>
<div class="paragraph">
<p>The 2 endpoints are connected to the same lambda via Proxy integration.</p>
</div>
<div class="paragraph">
<p>Both receive a json body of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
"arguments" : [ 2, 4, 6]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The expected response will be a json of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
"result" : 12
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result will be the sum or the product of the arguments depending on the respective endpoints <code>/sum</code> or <code>/mult</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrapping-the-project"><a class="anchor" href="#bootstrapping-the-project"></a>3. Bootstrapping the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The easiest way to create a new Microlam project is to open a terminal and run the following command:</p>
</div>
<div class="paragraph">
<p>In your CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn archetype:generate -DarchetypeGroupId=io.microlam -DarchetypeArtifactId=microlam-lambda-quickstart -DarchetypeVersion=0.8.4</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will have to answer a few questions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Choose a <code>groupId</code>, <code>artifactId</code>, <code>version</code> and <code>package</code> for your new project</p>
</li>
<li>
<p>Choose your <code>awsBucket</code> : this is the name of an S3 bucket where the lambda artifacts will be deployed</p>
</li>
<li>
<p>Choose your <code>awsProfile</code> : this is the name of your AWS profile</p>
</li>
<li>
<p>Choose your <code>awsRegion</code>: this is the name of an AWS region (ex: <code>eu-west-1</code>)</p>
</li>
<li>
<p>Choose your <code>lambdaName</code>: this is the name of your Lambda must be also suitable as the name of the Java class for the Lambda.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">In case you provided incorrect values for <code>awsBucket</code>, <code>awsProfile</code> or <code>awsRegion</code>, no problem!</div>
<div class="paragraph">
<p>It is very easy to set these values afterwards:
Change the file <code>[package].devops.Aws</code> in <code>src/test/java</code> and eventually also <code>samconfig.toml</code> if you need to deploy with AWS SAM</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="discovering-and-working-with-the-generated-project"><a class="anchor" href="#discovering-and-working-with-the-generated-project"></a>4. Discovering and working with the generated project</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="the-java-code-in-srcmainjava"><a class="anchor" href="#the-java-code-in-srcmainjava"></a>4.1. The Java code in src/main/java</h3>
<div class="paragraph">
<p>Let&#8217;t take a concrete example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>groupId</code> = <code>tech.solusoft</code></p>
</li>
<li>
<p><code>artifactId</code> = <code>microlam-lambda</code></p>
</li>
<li>
<p><code>version</code> = <code>1.0-SNAPSHOT</code></p>
</li>
<li>
<p><code>package</code> = <code>tech.solusoft.example</code></p>
</li>
<li>
<p><code>awsProfile</code> = <code>premiumpay</code></p>
</li>
<li>
<p><code>awsRegion</code> = <code>eu-west-1</code></p>
</li>
<li>
<p><code>lambdaName</code> = <code>MicrolamLambda</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once generated, import the project into your prefered IDE, this is what you will find in <code>src/main/java</code>:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="./images/quickstart-files-src-main.png" alt="Files in src/main/java">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>[package].bs</code> folder, you can find the business services (separating the business operations from the AWS code is a good thing).</p>
</li>
<li>
<p>In the <code>[package].lambda</code> folder you can see 3 classes providing the Lambda entry points, in fact, only one (here <code>MicrolamLambda</code>) will be deployed to AWS (One good reason for that is to ensure this lambda will be more hot). <code>MultLambda</code> and <code>SumLambda</code> are really doing the work.</p>
</li>
<li>
<p>In the <code>[package].body</code> folder you can see <code>LambdaBodyIn</code> and <code>LambdaBodyOut</code>, they are POJO representing what expect the lambda as Input and what to expect from its output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s see the code for one of our Lambda (MultLambda):</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="./images/quickstart-mult-lambda-code.png" alt="MultLambda code">
</div>
</div>
<div class="paragraph">
<p>You can see the <code>MultLambda</code> code is very simple (as <code>SumLambda</code>), using the business service as a singleton (line 15), implementing the interface <code>APIGatewayProxyLambda</code> only method <code>handleRequest</code>.
Note the use of the library <a href="https://github.com/google/gson">google Gson</a> to convert from/to json to/from our POJOs (lines 24 and 31).</p>
</div>
<div class="paragraph">
<p>As we said, we use <code>MicrolamLambda</code> as a proxy to redirect the call to <code>MultLambda</code> and <code>SumLambda</code> depending on the target resource <code>/mult</code> or <code>/sum</code>:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="./images/quickstart-microlambda-code.png" alt="MicrolamLambda code">
</div>
</div>
<div class="paragraph">
<p>As you can see, <code>MicrolamLambda</code> implements the <code>registerAllLambda()</code> method from its abstract mother class and map each endpoint to a given lambda (it may be the same), the mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">[METHOD][SPACE][RESOURCE] -&gt; Lambda</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[METHOD] is <code>POST</code> or <code>GET</code> or <code>PUT</code> etc&#8230;&#8203; (the Http Method)</p>
</li>
<li>
<p>[SPACE] is the space character</p>
</li>
<li>
<p>[RESOURCE] is the resource for AWS, or endpoint (here <code>/mult</code> or <code>/sum</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Solving the aggregated log problem</div>
<div class="paragraph">
<p>As only the <code>MicrolamLambda</code> is deployed to AWS, the logs from <code>MultLambda</code> and <code>SumLambda</code> will be available in Cloudwatch at the same place inside <code>MicrolamLambda</code> logs. The <code>MicrolamLambda</code> mother class is logging at the beginning in which Lambda it is redirecting.
Be careful to always map any new Lambda, but even if you forgot to map it, the logs will tell you exactly which mapping was not found.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="the-pom-xml"><a class="anchor" href="#the-pom-xml"></a>4.2. The pom.xml</h3>
<div class="paragraph">
<p>You will find the import of the Microlam BOM, allowing you to omit the version on the different Microlam dependencies, but that&#8217;s not the main point.</p>
</div>
<div class="paragraph">
<p>What is original is that, you will not find any <code>microlam-maven-plugin</code> that will hide all the work that is made magically to compile or configure your native compilation.</p>
</div>
<div class="paragraph">
<p>One of Microlam value is to be easily hackable, because on a simple example, the magical solution may work, but what happens when it does not ? Microlam is designed with the idea that your project is enough complex to not work with a magical solution.
In fact, this Quickstart project will not compile magically because of the usage of Gson (using reflection) to Map from/to json to/from the POJOs for example&#8230;&#8203; So Microlam will help you generate the configuration for the compilation.</p>
</div>
<div class="paragraph">
<p>Microlam is providing everything inside this pom.xml, helping you compile, generate the Java Deployment package for your Lambdas and also help you compile natively your project with <a href="https://www.graalvm.org/">GraalVM</a> <a href="https://www.graalvm.org/21.3/reference-manual/native-image/">Native Image</a>.
In order to offer an uniform development experience (for linux, MacOS or Windows developer), Microlam is using Docker for compiling natively and building the Lambda Custom deployment package containing your compiled code.</p>
</div>
<div class="paragraph">
<p>The pom.xml allow you to achieve different goals:</p>
</div>
<div class="sect3">
<h4 id="generating-the-lambda-java-deployment-package"><a class="anchor" href="#generating-the-lambda-java-deployment-package"></a>4.2.1. Generating the Lambda Java Deployment package</h4>
<div class="paragraph">
<p>Use simply the java maven profile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn package -Pjava</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command build the Java deployment package in <code>target/</code> folder with the name <code>[xxx]-aws-lambda.jar</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Which Java version to choose ?</div>
<div class="paragraph">
<p>Currently AWS supports only <code>Java 8</code> or <code>Java 11</code> Runtimes, but it is possible to use a Custom Runtime to deploy also for <code>Java 17</code>. Microlam is providing the maven argument <code>-Djava17layer=axx64</code> for bringing the layer, see next TIP for detailed instructions and this project (<a href="https://github.com/microlam-io/lambda-java17-layer)">AWS Lambda Java 17 Runtime</a>.
By default, Microlam is configured by default to use <code>Java 11</code>, but you can change this to <code>Java 17</code> by setting the property <code>release.version</code> to 17.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">How to use Java 17 ?</div>
<div class="paragraph">
<p>First modify the pom.xml property: <code>release.version</code> to 17.
Then use the command <code>mvn package -Pjava -Djava17layer=axx64</code> where <code>axx64</code> is <code>amd64</code> or <code>arm64</code>. This brings the java 17 layer in your <code>target/</code> folder.
You need to deploy the Java 17 Layer and the simplest way is to use the CDK (but using the AWS console is also possible), see and update as necessary the Class <code>[xxx].devops.cdk.CreateApp</code> (from <code>src/test</code> folder).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Why we need the Java Lambda if we can compile to native ?</div>
<div class="paragraph">
<p>It is important to reduce the developement cycle develop-test-develop as much as possible. It may be a good idea to develop and test your Java Lambda because it is very fast and to compile only when needed. This is the same code, so it should be ok.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configure-compile-and-generate-the-native-lambda-deployment-package"><a class="anchor" href="#configure-compile-and-generate-the-native-lambda-deployment-package"></a>4.2.2. Configure, Compile and Generate the Native Lambda Deployment Package</h4>
<div class="paragraph">
<p>For an introduction to the subject of Native compilation for Java, you can refer to this <a href="https://frank-afriat.medium.com/lets-compile-your-aws-lambda-in-java-eafc24aae269">article</a>.</p>
</div>
<div class="paragraph">
<p>The native build is depending on the java version (<code>java11</code> or <code>java17</code>) and the target architecture (<code>amd64</code> or <code>arm64</code>).</p>
</div>
<div class="paragraph">
<p>You need to provide this information in the maven command line using <code>-Dnative=javaXX-axx64</code> (by replacing XX and xx with the correct values).</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say your target is <code>java11-amd64</code>, if everything is ready, you just have to use this maven command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -Djava11-amd64 -Pcompile</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case the build is successful, the Native deployment package is in the <code>target</code> folder with the name <code>[xxx]-aws-lambda-native.zip</code>.</p>
</div>
<div class="paragraph">
<p>But generally, this build will not work immediately and if it works, the resulting compiled code will not work at runtime. Actually, the GraalVM native-image tool is compiling only the code that is necessary using a static analysis,
which is not covering the cases of usage of Java Reflection for example, in our case, our use of Gson&#8230;&#8203; that&#8217;s why we need to provide an additional configuration to the tool.</p>
</div>
<div class="paragraph">
<p>The solution proposed by Microlam is to generate this configuration automatically by the <a href="https://www.graalvm.org/reference-manual/native-image/Agent/">GraalVM Tracing Agent</a> while you are running your integration tests on it.</p>
</div>
<div class="paragraph">
<p>This can be done by this maven command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -Djava11-amd64 -Pconfig</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the end of the build, a container is running, letting you run your tests on it :</p>
</div>
<div class="paragraph">
<p>In our case, you can run the Junit Tests in the class in <code>[xxx].devops.LocalLambdaTests</code>.</p>
</div>
<div class="paragraph">
<p>The generated configuration is updated (and merged) every 30s in the folder: <code>src/main/resources/META-INF/native-image/[groupId]/[artifactId]/</code>.</p>
</div>
<div class="paragraph">
<p>Then it is a good idea, to compile and test locally the Native lambda which can be done with this command activating the dev mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -Djava11-amd64 -Pcompile,dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the end of the build, a container is running, letting you try your native lambda locally.</p>
</div>
<div class="paragraph">
<p>In our case, you can run again the Junit Tests in the class in <code>[xxx].devops.LocalLambdaTests</code>.</p>
</div>
<div class="paragraph">
<p>If everything is working as expected, you are ready to generate your deployment package.</p>
</div>
<div class="paragraph">
<p>In another console, while the container is running, run this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn docker:copy -Dnative=java11-amd64 -Pcompile</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will copy the Native deployment package to the <code>target</code> folder with the name <code>[xxx]-aws-lambda-native.zip</code>.</p>
</div>
<div class="paragraph">
<p>You can now stop the running container from the first console, with CTRL-C.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-native-configuration"><a class="anchor" href="#the-native-configuration"></a>4.3. The Native configuration</h3>
<div class="paragraph">
<p>It is found in the <code>src/main/resources</code> folder:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="./images/quickstart-files-native-config.png" alt="Files in src/main/java">
</div>
</div>
<div class="paragraph">
<p>This configuration will be merged automatically when using the <code>config</code> profile.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-java-code-in-srctestjava"><a class="anchor" href="#the-java-code-in-srctestjava"></a>4.4. The Java code in src/test/java</h3>
<div class="paragraph">
<p>This is what you will find in <code>src/test/java</code>:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="./images/quickstart-files-src-test.png" alt="Files in src/main/java">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>[package].devops</code> folder, you can find code to help you test and deploy your Lambda.</p>
</li>
<li>
<p>In the <code>[package].devops.cdk</code> folder, you can find the class <code>CreateApp</code> including all what is necessary to deploy the complete Application to AWS using AWS CDK.</p>
</li>
<li>
<p>In the <code>[package]</code> folder, you can find the Class LambdaTest, which show you how to test your Lambda code without testing the Lambda Machinery for Unit testing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the AWS CDK is the recommended way to deploy your App and to maintain it during development.</p>
</div>
<div class="paragraph">
<p>As you develop, modify <code>CreateApp</code> if necessary, for our example, you need to apply a few changes to set the function Runtime, Architecture and Code according to your needs, because by default it deploys the Java Lambda Package.</p>
</div>
<div class="paragraph">
<p>Then use this command to deploy or synchronize your deployment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cdk deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Aws</code> class is used for holding the Aws configuration used by the <code>CreateApp</code> class for the CDK deployment.
When you develop your lambdas, it is possible to run simply the unit test in <code>UploadAndUpdateLambda</code> to upload your java deployment or <code>UploadAndUpdateLambdaNative</code> to upload your native deployment.</p>
</div>
<div class="paragraph">
<p>In case you want to clean everything on your aws account, you just need to run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cdk destroy</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging"><a class="anchor" href="#logging"></a>5. Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the project is using <a href="https://github.com/microlam-io/slf4j-simple-lambda">slf4j-simple-lambda</a> which is a fork of <code>slf4j-simple</code> dedicated to AWS Lambda with these features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support for AWSRequestId</p>
</li>
<li>
<p>Allow env properties with underscore instead of point to be compatible with the AWS lambda env property naming rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can change the configuration by updating the file  <code>simplelogger.properties</code>.</p>
</div>
<div class="paragraph">
<p>All the logs will be found in <code>CloudWatch</code> as usual.</p>
</div>
<div class="paragraph">
<p>For understanding how <code>slf4j-simple-lambda</code> solves the Java Aws Lambda Logging problem you can refer to this <a href="https://frank-afriat.medium.com/solving-the-java-aws-lambda-logging-problem-305b06df457f">article</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microlam"><a class="anchor" href="#microlam"></a>6. Microlam</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Microlam is only beginning and needs your <a href="https://github.com/microlam-io/microlam/discussions">feedback</a> and your help to improve.</p>
</div>
<div class="paragraph">
<p>If you have any questions or need some support, click <a href="https://microlam.io/support">here</a>.</p>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/microlam_logo_horizontal_rgb_439_reverse.png" class="project-logo" title="Microlam"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Microlam is open. All dependencies of this project are available under the <a href='https://github.com/microlam-io/microlam/blob/master/LICENSE.txt' target='_blank'>MIT License</a>, <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/microlam-io/microlam-site' target='_blank'>fork the website</a> and show us what youâ€™ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/about">About</a></li>
          
            <li><a href="/blog">Blog</a></li>
          
            <li><a href="/insights">Podcast</a></li>
          
            <li><a href="/events">Events</a></li>
          
            <li><a href="/newsletter">Newsletter</a></li>
          
            <li><a href="/security">Security&nbsp;policy</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/microlam_io">Twitter</a></li>
          
            <li><a href="https://github.com/microlam-io">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
            <li><a href="/support">Support</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/microlam">Stack Overflow</a></li>
          
            <li><a href="https://github.com/microlam-io/microlam/discussions">Discussions</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/microlam-io">Development mailing list</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Microlam is made of community projects</span>
        <ul class="footer-links">
          
            <li><a href="https://www.graalvm.org/" target="_blank">GraalVM</a></li>
          
            <li><a href="https://github.com/fabric8io/docker-maven-plugin" target="_blank">fabric8io/docker-maven-plugin</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html" target="_blank">AWS SDK for Java 2.x</a></li>
          
            <li><a href="https://maven.apache.org/" target="_blank">Maven</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content company-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> (adapted from <a href="https://quarkus.io">Quarkus</a> site) | <a href="https://solusoft.tech//privacy.html">Privacy Policy</a>
    </span>
    <span class="company">
      Sponsored by
    </span>
    <span class="company-logo">
      <a href="https://solusoft.tech/" target="_blank"><img src="/assets/images/solusoft-logo-longueur-transparent.png"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
    <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
</body>

</html>
